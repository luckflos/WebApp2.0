import{getNotFound as ce}from"./@qwik-city-not-found-paths.js";import{isStaticPath as fe}from"./@qwik-city-static-paths.js";import{_ as ue,a as de,v as he}from"./assets/index.qwik-b130db26.js";import{s as pe,r as me,m as ge}from"./assets/entry.ssr-a9b5aa1f.js";import ye from"./@qwik-city-plan.js";var V=class extends Error{constructor(e,r){super(r),this.status=e}};function we(e,r){let t="Server Error";return r!=null&&(typeof r.message=="string"?t=r.message:t=String(r)),"<html>"+Z(e,t)+"</html>"}function Z(e,r){typeof e!="number"&&(e=500),typeof r=="string"?r=be(r):r="";const t=typeof r=="string"?"600px":"300px",n=e>=500?_e:xe;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${r}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${n}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${t}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${n}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${n}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${r}</span></p></body>
`}var Se=/[&<>]/g,be=e=>e.replace(Se,r=>{switch(r){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),xe="#006ce9",_e="#713fc2",Re={lax:"Lax",none:"None",strict:"Strict"},ke={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},Te=(e,r,t)=>{const n=[`${e}=${r}`];typeof t.domain=="string"&&n.push(`Domain=${t.domain}`),typeof t.maxAge=="number"?n.push(`Max-Age=${t.maxAge}`):Array.isArray(t.maxAge)?n.push(`Max-Age=${t.maxAge[0]*ke[t.maxAge[1]]}`):typeof t.expires=="number"||typeof t.expires=="string"?n.push(`Expires=${t.expires}`):t.expires instanceof Date&&n.push(`Expires=${t.expires.toUTCString()}`),t.httpOnly&&n.push("HttpOnly"),typeof t.path=="string"&&n.push(`Path=${t.path}`);const a=Pe(t.sameSite);return a&&n.push(`SameSite=${a}`),t.secure&&n.push("Secure"),n.join("; ")},Ae=e=>{const r={};if(typeof e=="string"&&e!==""){const t=e.split(";");for(const n of t){const a=n.indexOf("=");a!==-1&&(r[decodeURIComponent(n.slice(0,a).trim())]=decodeURIComponent(n.slice(a+1).trim()))}}return r};function Pe(e){if(e===!0)return"Strict";if(e===!1)return"None";if(e)return Re[e]}var R=Symbol("request-cookies"),z=Symbol("response-cookies"),b=Symbol("live-cookies"),E,ee,De=class{constructor(e){this[E]={},this[ee]={},this[R]=Ae(e),this[b]={...this[R]}}get(e,r=!0){const t=this[r?b:R][e];return t?{value:t,json(){return JSON.parse(t)},number(){return Number(t)}}:null}getAll(e=!0){return Object.keys(this[e?b:R]).reduce((r,t)=>(r[t]=this.get(t),r),{})}has(e,r=!0){return!!this[r?b:R][e]}set(e,r,t={}){this[b][e]=typeof r=="string"?r:JSON.stringify(r);const n=typeof r=="string"?r:encodeURIComponent(JSON.stringify(r));this[z][e]=Te(e,n,t)}delete(e,r){this.set(e,"deleted",{...r,maxAge:0}),this[b][e]=null}headers(){return Object.values(this[z])}};E=z,ee=b;var We=(e,r)=>{const t=r.headers();if(t.length>0){const n=new Headers(e);for(const a of t)n.append("Set-Cookie",a);return n}return e},D=class{},W=class extends D{},U=new WeakMap,F="qaction",Me="qfunc";function ve(e){const{url:r,params:t,request:n,status:a,locale:s}=e,o={};n.headers.forEach((f,p)=>o[p]=f);const i=e.sharedMap.get(C),c=e.sharedMap.get(se),l=e.sharedMap.get(Be);return{url:new URL(r.pathname+r.search,r).href,requestHeaders:o,locale:s(),nonce:l,qwikcity:{ev:e,params:{...t},loadedRoute:qe(e),response:{status:a(),loaders:H(e),action:i,formData:c}}}}var Oe=(e,r,t,n,a)=>{const s=[],o=[],i=[],c=!!(r&&Ie(r[1]));return e&&B(s,o,i,e,c,t),r&&(n&&(t==="POST"||t==="PUT"||t==="PATCH"||t==="DELETE")&&i.unshift(je),c&&(t==="POST"&&i.push(Ce),i.push(He),i.push(Qe)),B(s,o,i,r[1],c,t),c&&(s.length+q.length>0&&i.push(q(s,o)),i.push(a))),i},B=(e,r,t,n,a,s)=>{for(const o of n){typeof o.onRequest=="function"?t.push(o.onRequest):Array.isArray(o.onRequest)&&t.push(...o.onRequest);let i;switch(s){case"GET":{i=o.onGet;break}case"POST":{i=o.onPost;break}case"PUT":{i=o.onPut;break}case"PATCH":{i=o.onPatch;break}case"DELETE":{i=o.onDelete;break}case"OPTIONS":{i=o.onOptions;break}case"HEAD":{i=o.onHead;break}}if(typeof i=="function"?t.push(i):Array.isArray(i)&&t.push(...i),a){const c=Object.values(o).filter(f=>J(f,"server_loader"));e.push(...c);const l=Object.values(o).filter(f=>J(f,"server_action"));r.push(...l)}}},J=(e,r)=>e&&typeof e=="function"&&e.__brand===r;function q(e,r){return async t=>{if(t.headersSent){t.exit();return}const{method:n}=t,a=H(t),s=L(t)==="dev",o=t[$];if(s&&n==="GET"&&t.query.has(F)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request.
Make sure you <form> has method="POST" attribute, like this: <form method="POST">`),n==="POST"){const i=t.query.get(F);if(i){const c=globalThis._qwikActionsMap,l=r.find(f=>f.__id===i)??(c==null?void 0:c.get(i));if(l){t.sharedMap.set(C,i);const f=await t.parseBody();if(!f||typeof f!="object")throw new Error("Expected request data to be an object");const p=await K(t,l.__validators,f,s);if(!p.success)a[i]=t.fail(p.status??500,p.error);else{const d=s?await v(t,l.__qrl.getSymbol().split("_",1)[0],()=>l.__qrl.call(t,p.data,t)):await l.__qrl.call(t,p.data,t);s&&M(o,d,l.__qrl),a[i]=d}}}}e.length>0&&await Promise.all(e.map(i=>{const c=i.__id;if(s&&a[c])throw new Error(`Duplicate loader id "${c}" detected. Please ensure that all loader ids are unique.`);return a[c]=K(t,i.__validators,void 0,s).then(l=>l.success?s?v(t,i.__qrl.getSymbol().split("_",1)[0],()=>i.__qrl.call(t,t)):i.__qrl.call(t,t):t.fail(l.status??500,l.error)).then(l=>(typeof l=="function"?a[c]=l():(s&&M(o,l,i.__qrl),a[c]=l),l))}))}}async function K(e,r,t,n){let a={success:!0,data:t};if(r)for(const s of r)if(n?a=await v(e,"validator$",()=>s.validate(e,t)):a=await s.validate(e,t),a.success)t=a.data;else return a;return a}function $e(e){return e&&typeof e=="object"&&Symbol.asyncIterator in e}async function Ce(e){const r=e.query.get(Me);if(r&&e.request.headers.get("X-QRL")===r&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const t=L(e)==="dev",n=e[$],a=await e.parseBody();if(Array.isArray(a)){const[s,...o]=a;if(Le(s)&&s.getHash()===r){let i;try{t?i=await v(e,`server_${s.getSymbol()}`,()=>s.apply(e,o)):i=await s.apply(e,o)}catch(c){e.headers.set("Content-Type","application/qwik-json"),e.send(500,await n._serializeData(c,!0));return}if($e(i)){e.headers.set("Content-Type","text/event-stream");const c=e.getWritableStream().getWriter();for await(const l of i){t&&M(n,l,s),e.headers.set("Content-Type","application/qwik-json");const f=await n._serializeData(l,!0);c.write(O.encode(`event: qwik
data: ${f}

`))}c.close()}else{M(n,i,s),e.headers.set("Content-Type","application/qwik-json");const c=await n._serializeData(i,!0);e.send(200,c)}return}}throw e.error(500,"Invalid request")}}function He(e){const r=Q(e),{basePathname:t,pathname:n,url:a}=e;if(!oe(n)&&n!==t&&!n.endsWith(".html")){if(r){if(!n.endsWith("/"))throw e.redirect(302,n+"/"+a.search)}else if(n.endsWith("/"))throw e.redirect(302,n.slice(0,n.length-1)+a.search)}}function M(e,r,t){try{e._verifySerializable(r,void 0)}catch(n){throw n instanceof Error&&t.dev&&(n.loc=t.dev),n}}var Le=e=>typeof e=="function"&&typeof e.getSymbol=="function";function Ie(e){const r=e[e.length-1];return r&&typeof r.default=="function"}function te(e,r){return e.pathname.endsWith(x)?e.pathname.slice(0,-x.length+(r?1:0))+e.search:e.pathname}var O=new TextEncoder;function je(e){if(Ue(e.request.headers,"application/x-www-form-urlencoded","multipart/form-data","text/plain")){const t=e.request.headers.get("origin"),n=e.url.origin;if(t!==n)throw e.error(403,`CSRF check failed. Cross-site ${e.method} form submissions are forbidden.
The request origin "${t}" does not match the server origin "${n}".`)}}function ze(e){return async r=>{if(r.headersSent||r.pathname.endsWith(x))return;r.request.headers.forEach((p,d)=>p);const n=r.headers;n.has("Content-Type")||n.set("Content-Type","text/html; charset=utf-8");const a=Q(r),{readable:s,writable:o}=new TextEncoderStream,i=r.getWritableStream(),c=s.pipeTo(i,{preventClose:!0}),l=o.getWriter(),f=r.status();try{const p=L(r)==="static",d=await e({base:r.basePathname+"build/",stream:l,serverData:ve(r),containerAttributes:{["q:render"]:p?"static":""}}),m={loaders:H(r),action:r.sharedMap.get(C),status:f!==200?f:200,href:te(r.url,a)};(typeof d).html==="string"&&await l.write(d.html),r.sharedMap.set("qData",m)}finally{await l.ready,await l.close(),await c}await i.close()}}async function Qe(e){if(oe(e.pathname)){try{await e.next()}catch(f){if(!(f instanceof W))throw f}if(e.headersSent||e.exited)return;const t=e.status(),n=e.headers.get("Location"),a=Q(e);if(t>=301&&t<=308&&n){const f=Ne(n);if(f){e.headers.set("Location",f),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}e.request.headers.forEach((f,p)=>f),e.headers.set("Content-Type","application/json; charset=utf-8");const o={loaders:H(e),action:e.sharedMap.get(C),status:t!==200?t:200,href:te(e.url,a),redirect:n??void 0},i=e.getWritableStream().getWriter(),l=await e[$]._serializeData(o,!0);i.write(O.encode(l)),e.sharedMap.set("qData",o),i.close()}}function Ne(e){if(e.startsWith("/")){const r=x,t=new URL(e,"http://localhost");return(t.pathname.endsWith("/")?t.pathname.slice(0,-1):t.pathname)+(r.startsWith("/")?"":"/")+r+t.search}else return}function G(){return typeof performance<"u"?performance.now():0}async function v(e,r,t){const n=G();try{return await t()}finally{const a=G()-n;let s=e.sharedMap.get("@serverTiming");s||e.sharedMap.set("@serverTiming",s=[]),s.push([r,a])}}function Ue(e,...r){var t;const n=((t=e.get("content-type"))==null?void 0:t.split(/;,/,1)[0].trim())??"";return r.includes(n)}function Fe(e){const r=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&r.push("immutable"),e.maxAge&&r.push(`max-age=${e.maxAge}`),e.sMaxAge&&r.push(`s-maxage=${e.sMaxAge}`),e.noStore&&r.push("no-store"),e.noCache&&r.push("no-cache"),e.private&&r.push("private"),e.public&&r.push("public"),e.staleWhileRevalidate&&r.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),r.join(", ")}var re=Symbol("RequestEvLoaders"),ne=Symbol("RequestEvMode"),ae=Symbol("RequestEvRoute"),$=Symbol("RequestEvQwikSerializer"),ie=Symbol("RequestEvTrailingSlash"),C="@actionId",se="@actionFormData",Be="@nonce";function Je(e,r,t,n,a,s,o,i){const{request:c,platform:l,env:f}=e,p=new De(c.headers.get("cookie")),d=new Headers,m=new URL(c.url);let g=-1,y=null,I,N=e.locale,w=200;const le=async()=>{for(g++;g<t.length;){const u=t[g],h=u(S);h instanceof Promise&&await h,g++}},_=()=>{if(y!==null)throw new Error("Response already sent")},k=(u,h)=>{if(_(),typeof u=="number"){w=u;const P=S.getWritableStream().getWriter();P.write(typeof h=="string"?O.encode(h):h),P.close()}else if(w=u.status,u.headers.forEach((A,P)=>{d.append(P,A)}),u.body){const A=S.getWritableStream();u.body.pipeTo(A)}else{if(w>=300&&w<400)return new W;S.getWritableStream().getWriter().close()}return new D},j={},T=new Map;T.set("@manifest",n);const S={[re]:j,[ne]:e.mode,[ie]:a,[ae]:r,[$]:o,cookie:p,headers:d,env:f,method:c.method,params:(r==null?void 0:r[0])??{},pathname:m.pathname,platform:l,query:m.searchParams,request:c,url:m,basePathname:s,sharedMap:T,get headersSent(){return y!==null},get exited(){return g>=X},next:le,exit:()=>(g=X,new D),cacheControl:u=>{_(),d.set("Cache-Control",Fe(u))},resolveValue:async u=>{const h=u.__id;if(u.__brand==="server_loader"&&!(h in j))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return j[h]},status:u=>typeof u=="number"?(_(),w=u,u):w,locale:u=>(typeof u=="string"&&(N=u),N||""),error:(u,h)=>(w=u,d.delete("Cache-Control"),new V(u,h)),redirect:(u,h)=>(_(),w=u,d.set("Location",h),d.delete("Cache-Control"),u>301&&d.set("Cache-Control","no-store"),new W),defer:u=>typeof u=="function"?u:()=>u,fail:(u,h)=>(_(),w=u,d.delete("Cache-Control"),{failed:!0,...h}),text:(u,h)=>(d.set("Content-Type","text/plain; charset=utf-8"),k(u,h)),html:(u,h)=>(d.set("Content-Type","text/html; charset=utf-8"),k(u,h)),parseBody:async()=>I!==void 0?I:I=Ke(S.request,T,o),json:(u,h)=>(d.set("Content-Type","application/json; charset=utf-8"),k(u,JSON.stringify(h))),send:k,isDirty:()=>y!==null,getWritableStream:()=>{if(y===null){if(e.mode==="dev"){const u=T.get("@serverTiming");u&&d.set("Server-Timing",u.map(h=>`${h[0]};dur=${h[1]}`).join(","))}y=e.getWritableStream(w,d,p,i,S)}return y}};return Object.freeze(S)}function H(e){return e[re]}function Q(e){return e[ie]}function qe(e){return e[ae]}function L(e){return e[ne]}var X=999999999,Ke=async(e,r,t)=>{var n;const a=e.clone(),s=((n=e.headers.get("content-type"))==null?void 0:n.split(/[;,]/,1)[0].trim())??"";if(s==="application/x-www-form-urlencoded"||s==="multipart/form-data"){const o=await a.formData();return r.set(se,o),Ge(o)}else{if(s==="application/json")return await a.json();if(s==="application/qwik-json")return t._deserializeData(await a.text())}},Ge=e=>{const r={};return e.forEach((t,n)=>{const a=n.split(".").filter(o=>o);let s=r;for(let o=0;o<a.length;o++){let i=a[o];o===a.length-1?i.endsWith("[]")?(i=i.slice(0,-2),s[i]=s[i]||[],s[i].push(t)):s[i]=t:s=s[i]={...s[i]}}}),r};function Xe(e,r,t,n,a=!0,s="/",o){let i;const c=new Promise(f=>i=f),l=Je(e,r,t,n,a,s,o,i);return{response:c,requestEv:l,completion:Ye(l,i)}}async function Ye(e,r){try{await e.next()}catch(t){if(t instanceof W)await e.getWritableStream().close();else if(t instanceof V){if(console.error(t),!e.headersSent){const n=we(t.status,t),a=t.status;e.html(a,n)}}else if(!(t instanceof D)){if(L(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const n=e.getWritableStream();if(!n.locked){const a=n.getWriter();await a.write(O.encode(Z(500,"Internal Server Error"))),await a.close()}}catch{console.error("Unable to render error page")}return t}}finally{e.isDirty()||r(null)}}function Ve(e,r){if(e.endsWith(x)){const t=e.length-Ze+(r?1:0);e=e.slice(0,t),e===""&&(e="/")}return e}var oe=e=>e.endsWith(x),x="/q-data.json",Ze=x.length,Ee=async(e,r,t,n)=>{if(Array.isArray(e))for(const a of e){const s=a[0].exec(n);if(s){const o=a[1],i=tt(a[2],s),c=a[4],l=new Array(o.length),f=[],p=et(r,n);let d;return o.forEach((m,g)=>{Y(m,f,y=>l[g]=y,t)}),Y(p,f,m=>d=m==null?void 0:m.default,t),f.length>0&&await Promise.all(f),[i,l,d,c]}}return null},Y=(e,r,t,n)=>{if(typeof e=="function"){const a=U.get(e);if(a)t(a);else{const s=e();typeof s.then=="function"?r.push(s.then(o=>{n!==!1&&U.set(e,o),t(o)})):s&&t(s)}}},et=(e,r)=>{if(e){r=r.endsWith("/")?r:r+"/";const t=e.find(n=>n[0]===r||r.startsWith(n[0]+(r.endsWith("/")?"":"/")));if(t)return t[1]}},tt=(e,r)=>{const t={};if(e)for(let n=0;n<e.length;n++){const a=(r==null?void 0:r[n+1])??"",s=a.endsWith("/")?a.slice(0,-1):a;t[e[n]]=decodeURIComponent(s)}return t};async function rt(e,r,t){const{render:n,qwikCityPlan:a,manifest:s,checkOrigin:o}=r,i=e.url.pathname,c=Ve(i,a.trailingSlash),l=await nt(a,c,e.request.method,o??!0,n);return l?Xe(e,l[0],l[1],s,a.trailingSlash,a.basePathname,t):null}async function nt(e,r,t,n,a){const{routes:s,serverPlugins:o,menus:i,cacheModules:c}=e,l=await Ee(s,i,c,r),f=Oe(o,l,t,n,ze(a));return f.length>0?[l,f]:null}function at(e){const r={_deserializeData:ue,_serializeData:de,_verifySerializable:he};e.manifest&&pe(e.manifest);async function t(n,a){try{const s=new URL(n.url);if(fe(n.method,s)||s.pathname.startsWith("/.netlify"))return a.next();const o={mode:"server",locale:void 0,url:s,env:Deno.env,request:n,getWritableStream:(l,f,p,d)=>{const{readable:m,writable:g}=new TransformStream,y=new Response(m,{status:l,headers:We(f,p)});return d(y),g},platform:a},i=await rt(o,e,r);if(i){i.completion.then(f=>{f&&console.error(f)});const l=await i.response;if(l)return l}const c=ce(s.pathname);return new Response(c,{status:404,headers:{"Content-Type":"text/html; charset=utf-8","X-Not-Found":s.pathname}})}catch(s){return console.error(s),new Response(String(s||"Error"),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8","X-Error":"netlify-edge"}})}}return t}const ft=at({render:me,qwikCityPlan:ye,manifest:ge});export{ft as default};
